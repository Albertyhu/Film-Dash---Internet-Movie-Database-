<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Film Dash</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/x-icon" href="/images/favicon.png">
</head>
<body>
  <div class = "w-full">
  <%- include("partials/header") %>
	<h2 class ="font-bold text-center mx-auto mt-[50px]"><%= title %></h2>
	<% if(movie_list) { %>
		<div class = "">
			<% movie_list.forEach(movie =>{ %>
				<div 
				id="MoviePanel"
				class ="rounded-lg boxshadow w-11/12 mx-auto my-[10px] bg-gray-300 p-10">
					<p class = "font-bold text-lg"><%= movie.title %></p>
					<p><%= movie.year %></p>
				<% if (!Array.isArray(movie.director)) {%>
					<p>Directed by <%= director_list.find(val => val._id.toString() == movie.director.toString() ).name %></p>
				<%} else { %>
					<p>Directed by 
						<% movie.director.forEach((codirector, index) =>{ %> 
							<%= director_list.find(val => val._id.toString() == codirector.toString() ).name %>
							<% if(index < movie.director.length - 2) { %> 
								<span>, </span>
						    <% } else if (index == movie.director.length - 2) { %> 
								<span> and </span>
							<%} %> 
						<%}) %> 
					</p>
				<%}%>
					<% if(movie.actors) {%>
						<p>Starring <% movie.actors.forEach((actor, index) => { %>
								<%= actor.name %>
								<% if(index < movie.actors.length - 2){ %>
									<span>, </span>
								<% } else if (index == movie.actors.length - 2){ %>
									<span> and </span>
								<% } %>
							<%})%>
						</p>
					<% } else {}%>
					<% if(movie.genres) { %> 
						<div 
						id = "genres"
							class = "flex my-10">
							<% movie.genres.forEach(val => { %> 
								<span class = "mx-10"><%= val.name %></span>
							<%})%>
						</div>
					<%} else {}%>
				</div>
			<%})%>
		</div>
	<%}else {}%>
  </div>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script>
  </script>
</body>
</html>